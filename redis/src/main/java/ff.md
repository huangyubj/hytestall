#####1.什么是redis
redis是一个基于内存操作，通过C实现的单线程key-value数据库，通过异步操作定时刷新数据到硬盘，有String、Hash、List、Set、Soredset5种数据结构内容，支持超时expire设置，因为基于内存操作、单线程、C实现以及RESP的简单易读，是目前最快的Key-Value数据库，也受限于内存，只能试用于较小数据量的高性能操作和运算上，常用语会话缓存、排行榜计数器、队列、发布订阅。
#####2.redis有哪几种数据淘汰策略
- no-enviction（驱逐）：禁止驱逐数据
- allkey-lru、allkey-random,基于所有key的最少使用和随机淘汰
- volatile-ttl、volitile-lru、volitile-random,基于设置了超时时间的最快要超时的、最少使用的、随机淘汰
#####3.一个字符串最大容量为512M
#####4.redis的集群方案有哪些
主从模式,通过配置slaveof host:port为主节点设置一个从节点,slaveof no one脱离主节点，info replication查看状态信息,有一主一从、一主多从、星行主从等拓扑形式，主节点挂了不会自动切换主节点，需要手动设定主节点,不满足高可用
哨兵模式(sentinel)以3个哨兵和3个redis服务为例，哨兵监听主节点，从主节点获取从节点最新信息，通过心跳检测主节点是否正常，当一个哨兵发现主节点ping不通，会通知其他2个哨兵，如果还有个哨兵也ping不通(设定2票为通过)则认定主节点已挂，发现的哨兵会发起选举，经过几轮raft选举出leader，当上一个主节点恢复，则变为从节点
#####5.redis哈希槽
redis有16384个哈希槽，每个redis负责一部分的槽，不是闭环的，有利于节点的变更，增加、删除节点进行变更负责的槽位，而一致性哈希算法，是一个闭合的哈希环，一个个节点分布在hash环上，依次寻找所在的位置
#####6.集群无法选择数据库只能默认0
#####7.redis管道，把多次指令放入管道种一次发送，减少网络开销,需要避免一次缓存数据过大，占用尽内存，请求不满管道需要flush进行强制发送
#####8.redis的事物，
redis通过MULTI开启事物，EXEC提交事物，DISCARD中断事物，WATCH监听事物，只有在语法错误才会一次性拒绝，部分异常不会阻止其他正确指令的执行
#####9.redis内存的优化
#####10.回收进程在内存大于maxmemory的显示时，通过设置的淘汰策略进行内存的释放
#####11.redis分布式锁，缺点
master如果宕机丢失了锁数据，会产生脏数据
#####12.缓存击穿、缓存雪崩产生的原因和解决方案
- 缓存击穿是对一个缓存为空的key发送大量请求，导致db压力很大或崩溃造成缓存击穿，通过不存的缓存null减少不必要查询，可以通过布隆过滤器，一个BitMap来存储所有可能存在的key，避免大量访问数据库
- 缓存雪崩是在同一时间大量缓存失效，涌进大量请求，导致数据库崩溃，可以采用加锁、随机失效时间来避免同时失效来解决
#####13.redis的持久化机制
- RDB，通过bgsave定期存储到硬盘，耗时耗性能，数据容易丢失，恢复快
- AOF，存储操作指令到aof日志中，产生的体积大，恢复慢，不容易丢失数据
#####14.redis的过期策略
#####15.缓存与数据库不一致怎么解决
数据库执行增删改清除缓存(mybatis的缓存即是如此处理)，从库更新数据缓存中的数据也更新
#####16.redis常见问题和解决方案
- master最好不做持久化工作
- 如果数据比较重要，在某个slave开启AOF备份，策略1s同步一次
- 为了主从复制的速度和链接的稳定,master和slave最好在一个局域网
- 尽量避免在压力大的主库上添加从库
- 主从复制，尽量使线性结构，避免节点压力大 master<-slave1<-slave2